<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>

<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="resources/css/setting.css">
<script src="https://code.jquery.com/jquery-3.7.1.min.js"
	integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
	crossorigin="anonymous"></script>
</head>
<body>
 <div class="logo-home">
      <button class="Home-btn" onclick="location.href='./'">
         <img src="resources/images/lg.png" class="logo">
      </button>
   </div>
   <form action="updateMember" method="post" class="joinForm">
      <h2>개인 정보 수정</h2>
      <div class="textForm">
      <p> 이메일 (수정이 불가합니다.)
         <input type="email" class="id" name="m_email" value="${loggedInMember.m_email}" required readonly>
      </p>
      </div>
      <div class="textForm">
      	<p> 비밀번호
         <input type="text" class="pw" name="m_password" placeholder="${loggedInMember.m_password}" required>
         </p>
         </div>
      <div class="textForm">
      <p> 이름
         <input type="text" class="name" name="m_name" placeholder="${loggedInMember.m_name}" required>
         </p>
      </div>
      <div class="textForm">
      <p> 휴대전화 번호
         <input type="text" class="phoneNumber" name="m_phoneNumber" placeholder="${loggedInMember.m_phoneNumber}" required>
         </p>
      </div>
      <div class="textForm">
      <p> 주소
         <input type="text" class="address" name="m_address" placeholder="${loggedInMember.m_address}" required>
         </p>
      </div>
      <div class="textForm">
      	<p> 나이
         <input type="text" class="age" name="m_age" placeholder="${loggedInMember.m_age}" required>
         <p>
      </div>
		
      <button type="submit">
         <span></span>
         <span></span>
         <span></span>
         <span></span>
         회원 정보 수정
      </button>
   </form>
	
</body>
<script type="text/javascript">
let msg = "${msg}";
if(msg != ""){
	alert(msg);
}	
</script>
<script>
   var rectangle = document.getElementById('rectangle');
   var menuButton = document.getElementById('menuButton');
   var iconContainer = document.getElementById('icon-container');
   var isRectangleVisible = false; // rectangle의 초기 상태를 정의 - 첫 메뉴 클릭 때 실행되지 않는 현상 해결

   menuButton.addEventListener('click', function() {
      if (!isRectangleVisible) {
         rectangle.style.display = 'block';
         iconContainer.style.display = 'none'; //메뉴 창이 나오면서 iconcontainer 사라지기
         isRectangleVisible = true; // rectangle이 보이는 상태로 설정
      } else {
         rectangle.style.display = 'none';
         iconContainer.style.display = 'flex';
         isRectangleVisible = false; // rectangle이 숨겨진 상태로 설정
      }
   });
</script>
<script>
 
document.addEventListener("DOMContentLoaded", function() {
  var loginBtn = document.getElementById("loginBtn");
  var logoutForm = document.getElementById("logoutForm");
  var signupBtn = document.getElementById("signupBtn");
  var myPageBtn = document.getElementById("myPage");

  var loggedInMember = '<%=session.getAttribute("login")%>';
  
      console.log("세션에 저장된 값: " + loggedInMember);
      // 여기서 로그인 여부를 확인하고 그에 따라 버튼을 표시하거나 숨깁니다.
      var isLoggedIn = loggedInMember !== 'null' && loggedInMember !== '';

      if (isLoggedIn) {
         loginBtn.style.display = "none";
         logoutForm.style.display = "block";
         signupBtn.style.display = "none";
         myPageBtn.style.display = "block";
      } else {
         loginBtn.style.display = "block";
         logoutForm.style.display = "none";
         signupBtn.style.display = "block";
         myPageBtn.style.display = "none";
      }
   });
</script>
</html>